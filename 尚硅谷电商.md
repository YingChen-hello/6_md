#### 代码技巧:

1. ##### 微服务:

   1) 微服务之间调用, 调用方建立 **feign** 包, 里面写入其他微服务里面的接口方法.
   2) 两个微服务之间如果存在互相引用的情况, 写一个可以被所有模块引用的公共模块.
   3) 总体架构![image-20220720152007910](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20220720152007910.png)
   4) 前后端交互的时候, 原来的 controller 重命名为 app (负责处理背后的rest逻辑, 之后移动端的可以直接复用), 新建 web 文件夹放页面跳转.
   5) 前端调用后端的数据: 使用 Thymeleaf, 后端得到的数据放入 model 对象属性中, Thymeleaf 可直接获得.
   6) 引入 dev_tools 可以在不重启项目实时更新页面改变; Ctrl+shift+F9 重新编译页面; 一定要关闭 Thymeleaf 的缓存(更新看不到效果); 如果是修改配置, 还是重启模块.

2. #####  视频站点:

   1. P131

      1. 2:03 **stream.map(...).collect(...);**
      2. 6:24 高级MyBatis 写接口, 使用MP的遍历 forEach.
      3. 各种 model 的属性的转换和构造, 值得二刷.

   2. P132

      ​	18:12 **stream().collect(Collectors.toMap());**// 属性转 map

   3. P133

      ​	20:30 MP的写SQL

   4. P138

      ​	嵌套查询3级数据.

   5. P139_4:20: Nginx 作为反向代理使用

      ​	a) 正向代理: 翻墙, 代理服务器服务客户端, 网络中屏蔽客户端信息, 网络中只知道代理服务器的地址.

      ​	b) 反向代理: 代理服务器服务于服务端, 服务端不想暴露信息 (地址/端口, 避免被恶意攻击), 客户端访问代理服务器来间接获取相应的服务.

      ​	c) 本机配置完 www.gulimall.com => 虚拟机的localhost 的映射, 输入网址=>转到虚拟机=>转到Nginx=>Nginx内部转发到Gatway或者直接其他的主页.

   6. 

   7. 

      

3. ##### 绿色笔记

   1. P134 / 结尾处: Feign 调用原理

   2. P137 / 12:00: Thymeleaf 的配置使用

   3. 

      



### ElasticSearch

1. 自定义分词功能, 把自定义的分词放到Nigix的配置文件中, 然后在 ElasticSearch 的配置文件中引入 Nigix 的配置文件地址.==> 对应功能: 商品网站点击关键字搜索时, ES 可以分词把搜索条件分词然后查询返回结果页面.
1. ELK==> E: ES  **/**  L: logStash(收集日志)  **/**  Kibana(ES的可视化界面)
1. ES跟MySQL相比: 全文检索功能更强大; 速度更快(数据放在内存中检索, 内存容量不够, 用分布式分片存储来解决); 内存资源宝贵, 放页面展示的重要数据, 空间换时间(sku+重复的spu都放到页面上), 但是减少冗余分表存储会导致并发访问时网络堵塞.
1. ES 中数组会被扁平化处理, 存储对象数据会导致其丧失属性间的相关性, 使用 nested 可以避免这种问题.